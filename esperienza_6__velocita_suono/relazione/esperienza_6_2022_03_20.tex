%% Document created 20 March 2022 automatically 
%% from /Users/massimosotgia/Desktop/uni_at_DIFI/Lab2/setup.py 

%% Copyright (C) Mattia Sotgia et al. 2022
%% Using class revtex4-2.cls
%                                       
%                                       
%██       █████  ██████         ██████  
%██      ██   ██ ██   ██             ██ 
%██      ███████ ██████          █████  
%██      ██   ██ ██   ██        ██      
%███████ ██   ██ ██████  ██     ███████ 
%                                       
%                                       
\documentclass[
    rmp,
    % preprint,
    % linenumbers,
    % tightlines,
    reprint, 
    superscriptaddress, 
    altaffilletter, 
    amsmath, 
    amssymb, 
    a4paper,
    varvw, 
    fleqn]{revtex4-2}

\input{../../style/preamble.tex}
\sisetup{
    % separate-uncertainty=true,
    round-mode=uncertainty,
    % exponent-mode = scientific
}

\fancyfoot[C]{
    \the\year\twodigits\month\twodigits\day/6-\thepage
}
\fancyhead[C]{\fontfamily{phv}\fontsize{12}{12}\selectfont RELAZIONE DI LABORATORIO \textbf{
    N. 3 % ! <== CAMBIARE (Nessuna rel. -> 00)
    } (\the\year)
}

\begin{document}

\title{Misura della velocità del suono in aria
}
\thanks{Esperienza n. 6
}

\author{Francesco Polleri}
\email{s5025011@studenti.unige.it}
\author{Mattia Sotgia}
\email{s4942225@studenti.unige.it}

\collaboration{Gruppo A1}
\affiliation{Dipartimento di Fisica, Università degli Studi di Genova, I-16146 Genova, Italia}

\date{presa dati
    20 marzo 2022, consegnata in data 
    \today
}

\begin{abstract}

\end{abstract}

\maketitle
\thispagestyle{fancy}
% Rimuovere per consegna
\SetBgContents{
    laboratorio2: e6 [non per la consegna] \today % ! Note di versione
}


%%%% CORPO DEL TESTO
%%%% CORPO DEL TESTO


\section{Introduzione}

L'obiettivo di questa esperienza di laboratorio è effettuare una misura della velocità del suono in aria. Per ottenere tale misura sfruttiamo l'intervallo di tempo che l'onda sonora impiega a percorrere la distanza che separa l'emettitore e il ricevitore. Infatti, una volta misurato tale intervallo di tempo, è necessario solamente conoscere appunto la distanza tra i due dispositivi per ricavare la velocità del suono. Il problema principale è però ottenere una misura precisa del tempo in quanto sappiamo che l'intervalli che andiamo a misurare sono molto brevi perché il suono viaggia ad una velocità di circa \SI{340}{\metre\per\second} per cui se posizioniamo emettitore e ricevitore ad una distanza nell'ordine delle decine di centimetri il tempo che l'onda impiega a percorrere tale distanza sarà allora nell'ordine dei millisecondi. 
Per misurare gli intervalli di tempo utilizziamo quindi due diversi metodi. Il primo metodo consiste nell'effettuare la misurazione in maniera analogica, osservando sull'oscilloscopio il ritardo temporale che intercorre tra il segnale prodotto dall'emettitore e il segnale prodotto dal ricevitore. Il secondo metodo, invece, consiste in una misura di tipo digitale. Infatti al posto di usare manualmente i cursori dell'oscilloscopio per vedere il ritardo temporale tra i due fronti d'onda, sfruttiamo una scheda Arduino DUE, che è in grado, una volta presi in input i segnali che ci interessano, di fornirci in output su un seriale i valori del ritardo temporale che appunto volevamo misurare.  

\section{Caratterizzazione apparato sperimentale analogico}

Il sistema di misura è composto da un emettitore ed un ricevitore posti ad una distanza $d=[0.1, 0.5]~\si{\metre}$. Questi due strumenti, messi in comunicazione con un oscilloscopio ci permettono di misurare il ritardo tra il fronte dell'onda trasmessa e quello dell'onda ricevuta, permettendoci di individuare il ritardo tra le due onde e quindi di inferire il valore della velocità del suono in aria. 

\textit{L'emettitore.---}L'emettitore consiste in un semplice altoparlante elettronico (attuatore), caratterizzato da un diametro esterno di \SI{5.985+-0.005}{\centi\metre} capace di convertire in onde sonore un segnale elettrico che gli viene dato in ingresso. Nel nostro caso viene alimentato in ingresso da un'onda quadra, di frequenza e ampiezza variabili (in base alle necessità della misura le frequenze sono tra \SI{10}{\hertz} e \SI{10}{\kilo\hertz}). Il generatore fornisce inoltre un segnale TTL standardizzato con la stessa frequenza dell'onda in ingresso che può quindi essere utilizzato come riferimento per la misura di quest'onda.

\textit{Il ricevitore.---}Lo strumento è composto da un microfono (trasduttore) che permette di convertire in segnale analogico l'onda sonora che riceve. Il segnale analogico continuo viene poi mandato in ingresso ad un comparatore a soglia fissa (automaticamente impostata ad un valore di \SI{00}{\volt}), che quindi permette di ottenere solo due letture in uscita, un segnale alto e un segnale basso. Il segnale che quindi leggiamo dal microfono è alto se il microfono non \emph{sente} nessun suono sopra la soglia impostata con il comparatore, mentre passa ad un segnale basso appena il segnale supera la soglia. Ci interessa quindi leggere l'istante in cui il segnale passa da alto a basso, ovvero il primo fronte di discesa del segnale. 

I due strumenti sono entrambi allineati ad una guida millimetrata fissata al tavolo, necessaria per individuare la distanza tra la sorgente e il ricevitore. 

\section{Presa dati \emph{analogica}}

Inizialmente utilizziamo semplicemente l'oscilloscopio per effettuare misure del ritardo $t$ tra la trasmissione e la ricezione del segnale sonoro. Possiamo infatti impostare lo strumento in modo che possa fornirci una lettura di differenza temporale (delay) tra due istanti nei due segnali che forniamo in ingresso. 

Impostiamo inizialmente la misura in modo da porre il primo cursore sul fronte di salita dell'onda quadra che genera il suono, e il secondo cursore sul primo fronte di discesa dell'onda del microfono. In questo modo lo strumento può effettuare in automatico una misura tra i due fronti. 

Lasciando fisso il ricevitore spostiamo la sorgente lungo la guida e dopo aver misurato la distanza $d$ raccogliamo i valori del rispettivo ritardo per quella distanza ottenendo così una serie di coppie di valori $(t,d)$.

Ripetiamo lo stesso procedimento ponendo però uno dei due cursori non più sul primo fronte di salita dell'onda dell'emettitore, bensì sul primo fronte di discesa della stessa onda. In questo modo otteniamo un nuovo set di dati da poter confrontare con il primo. 

\textit{Scelta dei limiti sulla distanza di misura $d$.---}Le distanze a cui viene effettuata la misura sono scelte in parte per un limite fisico degli strumenti, che si traduce in una lunghezza massima della guida oltre la quale non potevamo più effettivamente misurare la distanza, e un limite invece sperimentale legato al fatto che una distanza troppo piccola non avrebbe permesso di poter distinguere l'istante di emissione e l'istante di ricezione dell'onda. Infatti abbiamo che due sono i fattori principali legati a questo problema. 

Il primo è dovuto al funzionamento di altoparlante e microfono che funzionano attraverso campi elettromagnetici variabili legati alla presenza di bobine e magneti al loro interno. Perciò quando i due strumenti sono troppo vicini si possono verificare fenomeni di autoinduzione e mutua induzione. Il campo elettromagnetico derivante da questi fenomeni si propaga però alla velocità della luce, sei ordini di grandezza maggiore della quantità che stiamo cercando di misurare, perciò l'effetto di accoppiamento emettitore-trasduttore è praticamente istantaneo, e il delay risulta essere quindi nullo. 

Un secondo effetto è legato invece alla mancanza di un vero isolamento acustico tra i due strumenti, che essendo assicurati alla stessa guida, permettono quindi la trasmissione di vibrazioni, che risultano essere trascurabili per distanze sufficientemente grandi, ma che invece possono risultare influenti a distanze molto piccole, tali per cui il suono propagato nel tavolo non si dissipa prima di raggiungere il microfono. 

\section{Analisi dati \emph{analogica}}

Nell'ipotesi che la densità dell'aria sia uniforme e la temperatura costante (quindi che il valore della velocità del suono sia costante) per il tratto di spazio che l'onda sonora percorre, possiamo considerare che la velocità media $\expval{v_s}$, calcolata come distanza su tempo, sia uguale al valore istantaneo della velocità del suono $v_s$. In questa ipotesi allora la misura della velocità del suono può essere trattata al primo ordine di approssimazione come una misura della distanza $d$ e una misura del tempo $t$ impiegato per coprire tale distanza. In questo modo allora otteniamo che la distanza percorsa può essere considerata come $d=v_st$, dove però stiamo ipotizzando di considerare la misura della distana in termini esatti. Ma poichè la distanza può essere considerata a meno di una costante additiva, di offset rispetto al posizionamento dell'emettitore e del ricevitore, allora è più corretto considerare una relazione \begin{equation}
    d=v_st + \delta_\text{offset}\label{eq:first_order_approx}.
\end{equation} Stiamo però ancora considerando condizioni ottimali di misura, per cui ipotizziamo che il ricevitore e l'emettitore siano perfettamente in asse, ovvero che siano allineati perfettamente anche nelle direzioni ortogonali alla trasmissione del segnale. Si potrebbe introdurre un fattore quadratico all'interno della funzione di fit che includa questo disassamento per cui la funzione risulterebbe
\begin{equation}
    d=\sqrt{v_s^2t^2+2\delta_\text{offset}v_st+(\delta_\text{offset}^2-\delta_\perp^2)}
    \label{eq:second_order_approx}
\end{equation}
Osserviamo però che questa correzzione non porta a nessun rispetto al modello lineare in quanto otteniamo che $\delta_\text{offset}^2-\delta_\perp^2 \simeq \delta_\text{offset}^2$, che porta quindi l'espressione \refeqn{eq:second_order_approx} ad essere equivalente all'espressione \refeqn{eq:first_order_approx}.



Realizziamo quindi un grafico (figura \ref{fig:analog_plot_d1}) su cui riportiamo entrambi i set di punti e facciamo un fit secondo la funzione \begin{equation}
     d(t)=v_s t+\delta_\text{offset}
\end{equation} dove $v_s$ e $\delta_\text{offset}$ sono i parametri che rappresentano rispettivamente la pendenza della retta e la sua quota, cioè, nel nostro caso, la velocità a cui ha viaggiato il suono emesso dall'altoparlante e l'offset sulla misura della distanza. Questo offset è dovuto al fatto che noi non misuriamo la distanza vera e propria tra emettitore e ricevitore perché è difficile trovare in questo modo dei punti precisi su cui prendere le misure, quindi troviamo un punto di riferimento sulla base che sostiene l'altoparlante e e un punto sulla base del microfono e misuriamo la distanza tra questi. La presenza di questo offset non influisce sulla misura che vogliamo fare, in quanto la pendenza della retta, da cui ricaviamo il valore della velocità del suono, non è legata al valore dell'intercetta, purchè l'offset sia lo stesso per ogni distanza a cui abbiamo preso le misure.

\begin{figure}[!t]
    \centering
    \includegraphics[width=0.75\linewidth]{plot_a220417.pdf}
    \caption{Dipendenza lineare del ritardo dal tempo $t$, il coefficiente di proporzionalità esprime la velocità di propagazione di un onda sonora in aria.}\label{fig:analog_plot_d1}
\end{figure}

Dal fit otteniamo che, considerando i dati raccolti sfruttando l'onda prodotta sul fronte di salita del segnale emesso, \begin{align*}
    v_s &=\SI{348.060(654)}{\metre\per\second}\\
    \delta_\text{offset} &=\SI{0.146711(428)}{\metre},
\end{align*} mentre considerando i dati raccolti sfruttando l'onda prodotta sul fronte di discesa del segnale otteniamo \begin{align*}
    v_s &=\SI{349.87(1.03)}{\metre\per\second}\\
    \delta_\text{offset} &=\SI{0.127950(915)}{\metre}.
\end{align*}
Vediamo che i valori dei 2 offset sono nell'ordine dei centimetri, che corrisponde a ciò che ci aspettavamo, in quanto, come detto in precedenza, la distanza tra altoparlante e microfono è stata misurata usando dei punti di riferimento distanti appunto qualche centimentro dai punti in cui effettivamente veniva emesso e rivelato il suono. 

Osserviamo che i due valori del parametro $v_s$ sono compatibili (con una significatività statistica di 1.48$\sigma$) e perciò possiamo ricavare la miglior stima \[v_s(\text{Analogic})=\SI{348.577(552)}{\metre\per\second}.\]

\section{Descrizione del sistema automatico di acquisizione dati}
Siccome nella misura con il metodo analogico abbiamo dovuto usare l'oscilloscopio come strumento di misura, dovendo di volta in volta riposizionare i cursori per ottenere una misura precisa del ritardo tra le due onde, vogliamo adesso trovare un modo per riuscire a raccogliere un maggior numero di dati in maniera più automatica e veloce.
Sino ad ora abbiamo misurato il ritardo temporale tra il primo fronte dell'onda quadra che permette all'altoparlante di emettere il suono e il primo fronte di discesa dell'onda del microfono, che corrisponde all'inizio dell'oscillazione della membrana del ricevitore. Sfruttando però il sistema automatico, che appunto vogliamo creare e utilizzare, possiamo rendere la misura più precisa. Possiamo infatti fare in modo che il nostro sistema acquisisca il ritardo del primo fronte di discesa e il ritardo del fronte di salita immediatamente successivo, in modo da poter fare una media e capire quale ritardo corrisponde effettivamente al massimo o minimo dell'oscillazione della membrana del microfono. Per migliorare ancora di più la precisione possiamo richiedere che il sistema acquisisca N volte tali misure.

Per creare questo sistema utilizziamo una scheda \emph{Arduino DUE} per la realizzazione di un timer.  
\iffalse
\begin{figure}
    \centering
    \includegraphics[width=0.75\linewidth]{digital_plot_prelim220406.pdf}
    \caption{Dipendenza lineare del ritardo dal tempo $t$, il coefficiente di proporzionalità esprime la velocità di propagazione di un onda sonora in aria. Raccolta dati effettuata autonomamente con sistema integrato. Dati preliminari.}\label{fig:digital_plot_d2}
\end{figure}

\begin{figure}
    \centering
    \includegraphics[width=\linewidth]{fullscale.pdf}
    \caption{Risultati complessivi analisi dati. Differenza sperimentale tra il valore teorico della velocità del suono \SI{344}{\metre\per\second} e il valore misurato in laboratorio. Miglior stima del valore ottenuto. }
\end{figure}
\fi


\section{Conclusioni}


%\onecolumngrid
\appendix

\setcounter{table}{0}
\renewcommand{\thetable}{A-\Roman{table}}

\end{document}
    
